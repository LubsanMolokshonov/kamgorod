# –§–∞–∑–∞ 7: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF-–¥–∏–ø–ª–æ–º–æ–≤ - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ

## –ß—Ç–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ

### 1. –ö–ª–∞—Å—Å Diploma (classes/Diploma.php)
–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF-–¥–∏–ø–ª–æ–º–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF —á–µ—Ä–µ–∑ mPDF
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã (—à—Ä–∏—Ñ—Ç DejaVu Sans)
- ‚úÖ –ù–∞–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —à–∞–±–ª–æ–Ω –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚úÖ –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–µ–π —á–µ—Ä–µ–∑ JSON (field_positions)
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–ø–ª–æ–º–æ–≤ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∏ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ: –µ—Å–ª–∏ –¥–∏–ø–ª–æ–º —É–∂–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ 'diploma_ready'
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ diplomas
- ‚úÖ –°—á–µ—Ç—á–∏–∫ —Å–∫–∞—á–∏–≤–∞–Ω–∏–π

### 2. –≠–Ω–¥–ø–æ–∏–Ω—Ç —Å–∫–∞—á–∏–≤–∞–Ω–∏—è (ajax/download-diploma.php)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–ª–∞–¥–µ–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π)
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: registration_id –∏ type (participant/supervisor)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ PDF —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
- ‚úÖ –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç —Å—á–µ—Ç—á–∏–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–π

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ (pages/cabinet.php)
- ‚úÖ –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –∫–Ω–æ–ø–∫–∏ "–°–∫–∞—á–∞—Ç—å –¥–∏–ø–ª–æ–º"
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–î–∏–ø–ª–æ–º —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è" (–µ—Å–ª–∏ has_supervisor = 1)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω SQL-–∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –±–ª–æ–∫

### 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
```
uploads/
‚îî‚îÄ‚îÄ diplomas/
    ‚îú‚îÄ‚îÄ .htaccess       # –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
    ‚îú‚îÄ‚îÄ .gitignore      # –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ PDF –≤ git
    ‚îî‚îÄ‚îÄ (–∑–¥–µ—Å—å –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è PDF)
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Composer (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

**macOS:**
```bash
# –ß–µ—Ä–µ–∑ Homebrew
brew install composer

# –ò–ª–∏ —Å–∫–∞—á–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é
php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');"
php composer-setup.php
sudo mv composer.phar /usr/local/bin/composer
php -r "unlink('composer-setup.php');"
```

**Linux:**
```bash
# Debian/Ubuntu
sudo apt update
sudo apt install composer

# CentOS/RHEL
sudo yum install composer
```

**Windows:**
–°–∫–∞—á–∞—Ç—å Composer-Setup.exe —Å https://getcomposer.org/download/

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

```bash
cd "/Users/LubsanMoloksonov1/Desktop/–ü–µ–¥–ø–æ—Ä—Ç–∞–ª –∫–∞–º–µ–Ω–Ω—ã–π –≥–æ—Ä–æ–¥"
composer install
```

–≠—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç:
- `mpdf/mpdf` ^8.0 - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF
- `yoomoney/yookassa-sdk-php` ^2.0 - –û–ø–ª–∞—Ç–∞ (–¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- `phpmailer/phpmailer` ^6.0 - Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ vendor/autoload.php —Å–æ–∑–¥–∞–Ω
ls -la vendor/autoload.php

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ mPDF —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
ls -la vendor/mpdf/mpdf/
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ –¥–∏–ø–ª–æ–º–æ–≤

### –§–æ—Ä–º–∞—Ç field_positions –≤ —Ç–∞–±–ª–∏—Ü–µ diploma_templates

–®–∞–±–ª–æ–Ω—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç JSON –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–µ–π. –ü—Ä–∏–º–µ—Ä:

```json
{
  "fio": {
    "x": 148.5,
    "y": 105,
    "font_size": 20,
    "font_weight": "bold",
    "text_align": "center",
    "color": "#000000",
    "max_width": 200
  },
  "organization": {
    "x": 148.5,
    "y": 125,
    "font_size": 14,
    "font_weight": "normal",
    "text_align": "center",
    "color": "#333333",
    "max_width": 220
  },
  "nomination": {
    "x": 148.5,
    "y": 140,
    "font_size": 16,
    "font_weight": "normal",
    "text_align": "center",
    "color": "#000000",
    "max_width": 200
  },
  "work_title": {
    "x": 148.5,
    "y": 155,
    "font_size": 14,
    "font_weight": "normal",
    "text_align": "center",
    "color": "#000000",
    "max_width": 220
  },
  "competition_name": {
    "x": 148.5,
    "y": 85,
    "font_size": 18,
    "font_weight": "bold",
    "text_align": "center",
    "color": "#8742ee",
    "max_width": 240
  },
  "placement": {
    "x": 148.5,
    "y": 170,
    "font_size": 16,
    "font_weight": "bold",
    "text_align": "center",
    "color": "#EE3F58",
    "max_width": 100
  },
  "participation_date": {
    "x": 240,
    "y": 195,
    "font_size": 12,
    "font_weight": "normal",
    "text_align": "right",
    "color": "#666666",
    "max_width": 50
  },
  "city": {
    "x": 148.5,
    "y": 115,
    "font_size": 12,
    "font_weight": "normal",
    "text_align": "center",
    "color": "#666666",
    "max_width": 150
  }
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–ª–µ–π:**
- `x`, `y` - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –º–∏–ª–ª–∏–º–µ—Ç—Ä–∞—Ö (A4 Landscape: 297mm √ó 210mm)
- `font_size` - –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –≤ –ø—É–Ω–∫—Ç–∞—Ö
- `font_weight` - –¢–æ–ª—â–∏–Ω–∞ —à—Ä–∏—Ñ—Ç–∞: normal, bold
- `text_align` - –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ: left, center, right
- `color` - –¶–≤–µ—Ç –≤ HEX —Ñ–æ—Ä–º–∞—Ç–µ
- `max_width` - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –≤ –º–º (–¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ —Å—Ç—Ä–æ–∫)

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏:

**–î–ª—è –¥–∏–ø–ª–æ–º–æ–≤ —É—á–∞—Å—Ç–Ω–∏–∫–∞:**
- `fio` - –§–ò–û —É—á–∞—Å—Ç–Ω–∏–∫–∞ (user_full_name)
- `organization` - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞
- `city` - –ì–æ—Ä–æ–¥ —É—á–∞—Å—Ç–Ω–∏–∫–∞
- `nomination` - –ù–æ–º–∏–Ω–∞—Ü–∏—è
- `work_title` - –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã
- `competition_name` - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—É—Ä—Å–∞
- `placement` - –ú–µ—Å—Ç–æ (1, 2, 3 –∏–ª–∏ —Ç–µ–∫—Å—Ç —Ç–∏–ø–∞ "–£—á–∞—Å—Ç–∏–µ")
- `participation_date` - –î–∞—Ç–∞ —É—á–∞—Å—Ç–∏—è

**–î–ª—è –¥–∏–ø–ª–æ–º–æ–≤ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è:**
- `fio` - –§–ò–û —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è (supervisor_name)
- `organization` - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è (supervisor_organization)
- –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —É—á–∞—Å—Ç–Ω–∏–∫—É

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —à–∞–±–ª–æ–Ω–∞–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

1. **–§–æ—Ä–º–∞—Ç:** JPEG –∏–ª–∏ PNG
2. **–û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è:** –ê–ª—å–±–æ–º–Ω–∞—è (Landscape)
3. **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä:** 297mm √ó 210mm (A4) = –ø—Ä–∏–º–µ—Ä–Ω–æ 3508 √ó 2480 px –ø—Ä–∏ 300 DPI
4. **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `assets/images/diplomas/`
5. **–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ:** –õ—é–±–æ–µ –∏–º—è, —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤ `diploma_templates.template_image`

## –ü—Ä–∏–º–µ—Ä SQL –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞

```sql
INSERT INTO diploma_templates (name, template_image, thumbnail_image, type, field_positions)
VALUES (
    '–§–∏–æ–ª–µ—Ç–æ–≤—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç',
    'template-purple-gradient.jpg',
    'template-purple-gradient-thumb.jpg',
    'participant',
    '{
        "fio": {"x": 148.5, "y": 105, "font_size": 20, "font_weight": "bold", "text_align": "center", "color": "#000000", "max_width": 200},
        "organization": {"x": 148.5, "y": 125, "font_size": 14, "font_weight": "normal", "text_align": "center", "color": "#333333", "max_width": 220},
        "nomination": {"x": 148.5, "y": 140, "font_size": 16, "font_weight": "normal", "text_align": "center", "color": "#000000", "max_width": 200},
        "competition_name": {"x": 148.5, "y": 85, "font_size": 18, "font_weight": "bold", "text_align": "center", "color": "#8742ee", "max_width": 240},
        "placement": {"x": 148.5, "y": 170, "font_size": 16, "font_weight": "bold", "text_align": "center", "color": "#EE3F58", "max_width": 100},
        "participation_date": {"x": 240, "y": 195, "font_size": 12, "font_weight": "normal", "text_align": "right", "color": "#666666", "max_width": 50}
    }'
);
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∏–ø–ª–æ–º–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞

```php
// –ß–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä –∏–ª–∏ curl
https://yoursite.ru/ajax/download-diploma.php?registration_id=1&type=participant
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–µ—Ä–≤—ã–π —Ä–∞–∑: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 2-5 —Å–µ–∫—É–Ω–¥)
- –°–∫–∞—á–∏–≤–∞–µ—Ç—Å—è —Ñ–∞–π–ª `diploma_1_participant.pdf`
- –í —Ç–∞–±–ª–∏—Ü–µ `diplomas` –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å
- –°—Ç–∞—Ç—É—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `diploma_ready`

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–ø–ª–æ–º–∞ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è

```php
https://yoursite.ru/ajax/download-diploma.php?registration_id=1&type=supervisor
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –£ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `has_supervisor = 1`
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–æ `supervisor_name`

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ –Ω–∞ —Ç–æ—Ç –∂–µ –¥–∏–ø–ª–æ–º:
- –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π PDF (–º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ)
- –°—á–µ—Ç—á–∏–∫ —Å–∫–∞—á–∏–≤–∞–Ω–∏–π –≤ —Ç–∞–±–ª–∏—Ü–µ `diplomas` –¥–æ–ª–∂–µ–Ω —É–≤–µ–ª–∏—á–∏—Ç—å—Å—è

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞—â–∏—Ç—ã –¥–æ—Å—Ç—É–ø–∞

–ü–æ–ø—ã—Ç–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —á—É–∂–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
```php
// –í–æ–π—Ç–∏ –∫–∞–∫ User A, –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —Å–∫–∞—á–∞—Ç—å –¥–∏–ø–ª–æ–º User B
https://yoursite.ru/ajax/download-diploma.php?registration_id=999&type=participant
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** HTTP 403 Forbidden

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º

–ü–æ–ø—ã—Ç–∫–∞ –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ PDF:
```
https://yoursite.ru/uploads/diplomas/diploma_1_participant_1234567890.pdf
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** HTTP 403 Forbidden (–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è .htaccess)

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –û—à–∏–±–∫–∞: "Class 'Mpdf\Mpdf' not found"

**–ü—Ä–∏—á–∏–Ω–∞:** Composer –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd "/Users/LubsanMoloksonov1/Desktop/–ü–µ–¥–ø–æ—Ä—Ç–∞–ª –∫–∞–º–µ–Ω–Ω—ã–π –≥–æ—Ä–æ–¥"
composer install
```

### –û—à–∏–±–∫–∞: "Template image not found"

**–ü—Ä–∏—á–∏–Ω–∞:** –§–∞–π–ª —à–∞–±–ª–æ–Ω–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ `assets/images/diplomas/`

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏–º—è —Ñ–∞–π–ª–∞ –≤ –ë–î —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å readable)

### –û—à–∏–±–∫–∞: "Permission denied" –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ PDF

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ `uploads/diplomas/`

**–†–µ—à–µ–Ω–∏–µ:**
```bash
chmod 755 uploads/diplomas
# –ò–ª–∏ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ (—Ç–æ–ª—å–∫–æ –Ω–∞ dev)
chmod 777 uploads/diplomas
```

### PDF —Å–æ–∑–¥–∞–µ—Ç—Å—è, –Ω–æ —Ç–µ–∫—Å—Ç –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º–∞ —Å —à—Ä–∏—Ñ—Ç–∞–º–∏ –∏–ª–∏ –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —à—Ä–∏—Ñ—Ç DejaVu Sans (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∏—Ä–∏–ª–ª–∏—Ü—É)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ HTML –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `charset="UTF-8"`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω—ã –≤ UTF-8

### –¢–µ–∫—Å—Ç –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –ø—Ä–µ–¥–µ–ª—ã —à–∞–±–ª–æ–Ω–∞

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ `field_positions`

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä—ã—Ç—å —à–∞–±–ª–æ–Ω –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
2. –ò–∑–º–µ—Ä–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –º–∏–ª–ª–∏–º–µ—Ç—Ä–∞—Ö (297mm √ó 210mm –¥–ª—è A4-L)
3. –û–±–Ω–æ–≤–∏—Ç—å JSON –≤ —Ç–∞–±–ª–∏—Ü–µ `diploma_templates`

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —à—Ä–∏—Ñ—Ç–æ–≤ mPDF

mPDF –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫—ç—à–∏—Ä—É–µ—Ç —à—Ä–∏—Ñ—Ç—ã –≤ `vendor/mpdf/mpdf/tmp/`. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —ç—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏:

```bash
chmod 755 vendor/mpdf/mpdf/tmp/
```

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —à–∞–±–ª–æ–Ω–æ–≤

–î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ JPEG –≤–º–µ—Å—Ç–æ PNG (–º–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä)
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–∫–∞—á–µ—Å—Ç–≤–æ 85-90%)
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä: 2480√ó1754 px (A4-L –ø—Ä–∏ 210 DPI)

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏ (–¥–ª—è –±—É–¥—É—â–µ–≥–æ)

–ï—Å–ª–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –∑–∞–Ω–∏–º–∞–µ—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏:
- –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å PDF –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å
- –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å email —Å —Å—Å—ã–ª–∫–æ–π –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å "–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è..." –≤ –∫–∞–±–∏–Ω–µ—Ç–µ

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ diplomas

```sql
CREATE TABLE diplomas (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    registration_id INT UNSIGNED NOT NULL,
    template_id INT UNSIGNED NOT NULL,
    pdf_filename VARCHAR(255) NOT NULL,
    recipient_type ENUM('participant', 'supervisor') NOT NULL,
    generated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    download_count INT UNSIGNED DEFAULT 0,
    last_downloaded_at TIMESTAMP NULL,
    FOREIGN KEY (registration_id) REFERENCES registrations(id) ON DELETE CASCADE,
    FOREIGN KEY (template_id) REFERENCES diploma_templates(id),
    UNIQUE KEY unique_diploma (registration_id, recipient_type)
);
```

**–ü–æ–ª—è:**
- `pdf_filename` - –ò–º—è —Ñ–∞–π–ª–∞ PDF (–Ω–∞–ø—Ä–∏–º–µ—Ä: diploma_1_participant_1234567890.pdf)
- `recipient_type` - –¢–∏–ø: participant –∏–ª–∏ supervisor
- `download_count` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏–π
- `last_downloaded_at` - –ü–æ—Å–ª–µ–¥–Ω—è—è –¥–∞—Ç–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–§–∞–∑–∞ 8+)

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –§–∞–∑—ã 7, —Å–ª–µ–¥—É—é—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
   - –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞ –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∏–ø–ª–æ–º–∞
   - –°—Å—ã–ª–∫–∞ –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤ –ø–∏—Å—å–º–µ
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PHPMailer

2. **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:**
   - –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –ø–æ–∑–∏—Ü–∏–π –ø–æ–ª–µ–π
   - Drag & drop –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —à–∞–±–ª–æ–Ω–æ–≤
   - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –¥–∏–ø–ª–æ–º–æ–≤ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

3. **–£–ª—É—á—à–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã—Ö –¥–∏–ø–ª–æ–º–æ–≤
   - QR-–∫–æ–¥ –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
   - –í–æ–¥—è–Ω—ã–µ –∑–Ω–∞–∫–∏
   - –¶–∏—Ñ—Ä–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∏

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ PHP: `tail -f /var/log/php/error.log`
2. –í–∫–ª—é—á–∏—Ç–µ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –≤ Diploma.php (–¥–æ–±–∞–≤—å—Ç–µ error_log)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Composer –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

## –ß–µ–∫-–ª–∏—Å—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏

- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Composer
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `composer install`
- [ ] –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `uploads/diplomas/` —Å–æ–∑–¥–∞–Ω–∞ —Å –ø—Ä–∞–≤–∞–º–∏ 755
- [ ] –§–∞–π–ª `.htaccess` –≤ `uploads/diplomas/` —Å–æ–∑–¥–∞–Ω
- [ ] –®–∞–±–ª–æ–Ω—ã –¥–∏–ø–ª–æ–º–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ `assets/images/diplomas/`
- [ ] –í —Ç–∞–±–ª–∏—Ü–µ `diploma_templates` –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —à–∞–±–ª–æ–Ω
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω download-diploma.php –¥–ª—è participant
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω download-diploma.php –¥–ª—è supervisor
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ PDF
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –ø—É–Ω–∫—Ç–æ–≤, –§–∞–∑–∞ 7 –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞! üéâ
